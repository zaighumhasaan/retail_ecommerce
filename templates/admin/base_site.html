{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Retail Admin Dashboard{% endblock %}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <style>
    :root { 
      --sidebar-width: 280px; 
      --primary-color: #2563eb;
      --secondary-color: #64748b;
      --success-color: #10b981;
      --danger-color: #ef4444;
      --warning-color: #f59e0b;
    }
    body { 
      background: #f8f9fb; 
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    .topbar { height: 56px; }
    .layout { min-height: 100vh; }
    .sidebar { 
      width: var(--sidebar-width); 
      max-width: 100%; 
      background: #fff; 
      border-right: 1px solid rgba(0,0,0,.08); 
      box-shadow: 0 0 20px rgba(0,0,0,.05);
    }
    @media (min-width: 992px) { 
      .sidebar { 
        position: sticky; 
        top: 56px; 
        height: calc(100vh - 56px); 
      } 
    }
    .sidebar .section-title { 
      font-size: .75rem; 
      letter-spacing: .08em; 
      color: #6c757d; 
      text-transform: uppercase; 
      margin-top: 1rem; 
      margin-bottom: .25rem; 
      font-weight: 600;
    }
    .nav-link { 
      color: #495057; 
      padding: 0.75rem 1rem;
      border-radius: 0.5rem;
      margin-bottom: 0.25rem;
      transition: all 0.2s ease;
    }
    .nav-link:hover { 
      color: var(--primary-color); 
      background: rgba(37, 99, 235, 0.1); 
    }
    .nav-link.active { 
      color: var(--primary-color); 
      font-weight: 600; 
      background: rgba(37, 99, 235, 0.1);
    }
    main.main { flex: 1 1 auto; }
    .card { 
      border: 1px solid rgba(0,0,0,.08); 
      box-shadow: 0 1px 3px rgba(0,0,0,.1);
    }
    .card-header { 
      background: #fff; 
      border-bottom: 1px solid rgba(0,0,0,.08);
    }
    .navbar-brand {
      font-weight: 700;
      font-size: 1.25rem;
    }
    .badge {
      font-size: 0.75rem;
      font-weight: 500;
    }
    .table {
      border-collapse: separate;
      border-spacing: 0;
    }
    .table th {
      background-color: #f8f9fa;
      border-top: none;
      font-weight: 600;
      color: #495057;
      border: 1px solid #dee2e6;
    }
    .table td {
      border: 1px solid #dee2e6;
    }
    .table-bordered {
      border: 1px solid #dee2e6;
    }
    .table-bordered th,
    .table-bordered td {
      border: 1px solid #dee2e6;
    }
    .table img {
      max-width: 50px;
      max-height: 50px;
      object-fit: cover;
      border-radius: 0.375rem;
    }
    .table td.text-center {
      vertical-align: middle;
    }
    .btn {
      border-radius: 0.5rem;
      font-weight: 500;
    }
    .form-control, .form-select {
      border-radius: 0.5rem;
      border: 1px solid #d1d5db;
    }
    .form-control:focus, .form-select:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 0.2rem rgba(37, 99, 235, 0.25);
    }
    .alert {
      border-radius: 0.75rem;
      border: none;
    }
    .pagination {
      --bs-pagination-border-radius: 0.5rem;
    }
  </style>
</head>
<body>
  <!-- Top navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="{% url 'admin:index' %}">
        <i class="bi bi-shop me-2"></i>Retail Admin
      </a>
      <div class="navbar-nav ms-auto">
        <div class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown">
            <i class="bi bi-person-circle me-1"></i>{{ user.get_full_name|default:user.username }}
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="{% url 'admin:auth_user_change' user.id %}">
              <i class="bi bi-person me-2"></i>Profile
            </a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="{% url 'admin:logout' %}">
              <i class="bi bi-box-arrow-right me-2"></i>Logout
            </a></li>
          </ul>
        </div>
      </div>
    </div>
  </nav>
  <div class="topbar"></div>
  <div class="layout d-flex">
    <aside class="sidebar d-none d-lg-block">
      <div class="p-4 border-bottom">
        <div class="d-flex align-items-center gap-3">
          <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center" style="width: 56px; height: 56px;">
            <i class="bi bi-person-fill text-white fs-4"></i>
          </div>
          <div>
            <div class="fw-semibold">{{ user.get_full_name|default:user.username }}</div>
            <div class="text-muted small">{{ user.email }}</div>
          </div>
        </div>
      </div>
      <nav class="p-3">
        <div class="section-title">Products</div>
        <a class="nav-link" href="{% url 'admin:core_product_changelist' %}">
          <i class="bi bi-box me-2"></i>Products
        </a>
        <a class="nav-link" href="{% url 'admin:core_category_changelist' %}">
          <i class="bi bi-tags me-2"></i>Categories
        </a>
        
        <div class="section-title">Orders</div>
        <a class="nav-link" href="{% url 'admin:core_order_changelist' %}">
          <i class="bi bi-receipt me-2"></i>Orders
        </a>
        
        <div class="section-title">Users</div>
        <a class="nav-link" href="{% url 'admin:auth_user_changelist' %}">
          <i class="bi bi-people me-2"></i>Users
        </a>
        <a class="nav-link" href="{% url 'admin:core_userprofile_changelist' %}">
          <i class="bi bi-person-badge me-2"></i>Profiles
        </a>
      </nav>
    </aside>
    <main class="main w-100">
      <div class="container-fluid p-4">
        {% if messages %}
          {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
              {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
          {% endfor %}
        {% endif %}
        {% block content %}{% endblock %}
      </div>
    </main>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
